{"version":3,"sources":["99-twitter/js/gallery/gallery.js"],"names":[],"mappings":"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","file":"99-twitter/js/gallery/gallery.js","sourcesContent":["import config from '../config';\nimport FlickrApi from '../flickr/flickrApi';\nimport FlickrImage from '../flickr/FlickrImage';\nimport FlickrImageModal from '../flickr/FlickrImageModal';\nimport jQuery from 'jQuery';\n\nexport default class Gallery {\n  constructor(galleryId, placeId) {\n    this.galleryId = galleryId;\n    this.placeId = placeId;\n\n    this.gallery = [];\n    this.selectedImage = null;\n    this.locked = false;\n\n    this.flickrApi = new FlickrApi( config.TWITTER_API_KEY );\n  }\n\n  setup() {\n    this.update().then( () => this.render() );\n  }\n\n  update() {\n    return this.flickrApi\n      .getGalleryFromPlace( this.placeId )\n      .then((gallery) => {\n        gallery.forEach((image, index) => {\n          gallery[ index ] = new FlickrImage( image );\n        });\n\n        this.gallery = gallery;\n\n        return gallery;\n      });\n  }\n\n  render() {\n    let galleryImages = jQuery( '#' + this.galleryId )\n      .find( '.images' );\n\n    this.gallery.forEach((image, index) => {\n      let figure = jQuery( image.render( 200, 50 ) );\n\n      figure.addClass( 'col-md-4' );\n\n      figure.on('click', () => this.selectImage( image ));\n\n      figure.hide()\n        .appendTo( galleryImages )\n        .delay(index * 100)\n        .fadeIn();\n    });\n  }\n\n  selectImage(image) {\n    if (this.locked) {\n      return;\n    }\n    \n    this.selectedImage = image;\n    this.locked = true;\n\n    var imageInfoPromise = this.getImageInformation( image.id );\n    var userInfoPromise = this.getUserInformation( image.owner );\n\n    jQuery.when( imageInfoPromise, userInfoPromise )\n      .then((imageInfo, userInfo) => {\n        let imageModal = new FlickrImageModal( imageInfo, userInfo );\n\n        this.hideGalleryImages();\n        this.showImagePopUp( imageModal );\n      })\n      .always(() => this.locked = false);\n  }\n\n  getImageInformation(imageId) {\n    return this.flickrApi.getImageInformation( imageId );\n  }\n\n  getUserInformation(userId) {\n    return this.flickrApi.getUserInformation( userId );\n  }\n\n  showGalleryImages() {\n    let galleryImages = jQuery( '#' + this.galleryId )\n      .find( '.images' );\n\n    return galleryImages.fadeIn( 'slow' );\n  }\n\n  hideGalleryImages() {\n    let galleryImages = jQuery( '#' + this.galleryId )\n      .find( '.images' );\n\n    return galleryImages.fadeOut( 'slow' );\n  }\n\n  showImagePopUp(imageModal) {\n    var modal = jQuery( imageModal.render() );\n\n    modal.appendTo( 'body' )\n      .modal( 'show' )\n      .on('hidden.bs.modal', () => {\n        this.showGalleryImages()\n\n        modal.remove(); \n      });\n  }\n}"],"sourceRoot":"/source/"}